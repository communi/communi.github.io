<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<title>Communi: examples/client/ircmessageformatter.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="https://communi.github.io"><img alt="Logo" src="communi.png"/></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Communi
   &#160;<span id="projectnumber">3.6.0</span>
   </div>
   <div id="projectbrief">A cross-platform IRC framework written with Qt</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_203d4d556f0b43667aeffd628b7d55e3.html">client</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ircmessageformatter.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="client.html">Client example</a>  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2008-2020 The Communi Project</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This example is free, and not covered by the BSD license. There is no</span></div>
<div class="line"><span class="comment"> * restriction applied to their modification, redistribution, using and so on.</span></div>
<div class="line"><span class="comment"> * You can study them, modify them, use them in your own program - either</span></div>
<div class="line"><span class="comment"> * completely or partially.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ircmessageformatter_8h.html">ircmessageformatter.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;IrcTextFormat&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;IrcConnection&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QTime&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Irc&gt;</span></div>
<div class="line"> </div>
<div class="line">QString IrcMessageFormatter::formatMessage(<a class="code" href="classIrcMessage.html">IrcMessage</a>* message)</div>
<div class="line">{</div>
<div class="line">    QString formatted;</div>
<div class="line">    <span class="keywordflow">switch</span> (message-&gt;type()) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbea8be6a23471631f8d29d814434aa75a04">IrcMessage::Join</a>:</div>
<div class="line">            formatted = formatJoinMessage(<span class="keyword">static_cast&lt;</span><a class="code" href="classIrcJoinMessage.html">IrcJoinMessage</a>*<span class="keyword">&gt;</span>(message));</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbea546c7f488c441f6defd41f8a7f2fe412">IrcMessage::Mode</a>:</div>
<div class="line">            formatted = formatModeMessage(<span class="keyword">static_cast&lt;</span><a class="code" href="classIrcModeMessage.html">IrcModeMessage</a>*<span class="keyword">&gt;</span>(message));</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbeade8a49033f005713c4a49755eb5ce4f2">IrcMessage::Names</a>:</div>
<div class="line">            formatted = formatNamesMessage(<span class="keyword">static_cast&lt;</span><a class="code" href="classIrcNamesMessage.html">IrcNamesMessage</a>*<span class="keyword">&gt;</span>(message));</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbea1d6b506c86c49118e00ea91e6a5e715c">IrcMessage::Nick</a>:</div>
<div class="line">            formatted = formatNickMessage(<span class="keyword">static_cast&lt;</span><a class="code" href="classIrcNickMessage.html">IrcNickMessage</a>*<span class="keyword">&gt;</span>(message));</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbea78efe3c17c39aebe549ec60ed12fbeb6">IrcMessage::Part</a>:</div>
<div class="line">            formatted = formatPartMessage(<span class="keyword">static_cast&lt;</span><a class="code" href="classIrcPartMessage.html">IrcPartMessage</a>*<span class="keyword">&gt;</span>(message));</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbeaaf0f4b4adb7b851d0c7f64c3303b75f8">IrcMessage::Private</a>:</div>
<div class="line">            formatted = formatPrivateMessage(<span class="keyword">static_cast&lt;</span><a class="code" href="classIrcPrivateMessage.html">IrcPrivateMessage</a>*<span class="keyword">&gt;</span>(message));</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbead5c86c25082627ad735425bd52a5db4e">IrcMessage::Quit</a>:</div>
<div class="line">            formatted = formatQuitMessage(<span class="keyword">static_cast&lt;</span><a class="code" href="classIrcQuitMessage.html">IrcQuitMessage</a>*<span class="keyword">&gt;</span>(message));</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> formatMessage(formatted);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QString IrcMessageFormatter::formatMessage(<span class="keyword">const</span> QString&amp; message)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (!message.isEmpty()) {</div>
<div class="line">        QString formatted = QObject::tr(<span class="stringliteral">&quot;[%1] %2&quot;</span>).arg(QTime::currentTime().toString(), message);</div>
<div class="line">        <span class="keywordflow">if</span> (message.startsWith(<span class="stringliteral">&quot;!&quot;</span>))</div>
<div class="line">            formatted = QObject::tr(<span class="stringliteral">&quot;&lt;font color=&#39;gray&#39;&gt;%1&lt;/font&gt;&quot;</span>).arg(formatted);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message.startsWith(<span class="stringliteral">&quot;*&quot;</span>))</div>
<div class="line">            formatted = QObject::tr(<span class="stringliteral">&quot;&lt;font color=&#39;maroon&#39;&gt;%1&lt;/font&gt;&quot;</span>).arg(formatted);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message.startsWith(<span class="stringliteral">&quot;[&quot;</span>))</div>
<div class="line">            formatted = QObject::tr(<span class="stringliteral">&quot;&lt;font color=&#39;indianred&#39;&gt;%1&lt;/font&gt;&quot;</span>).arg(formatted);</div>
<div class="line">        <span class="keywordflow">return</span> formatted;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> QString();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QString IrcMessageFormatter::formatJoinMessage(<a class="code" href="classIrcJoinMessage.html">IrcJoinMessage</a>* message)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (message-&gt;flags() &amp; <a class="code" href="classIrcMessage.html#a77ccf44a9581bfcd5504deb609dd2864adda0a6be2cc32893bca0639e73de4f0f">IrcMessage::Own</a>)</div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! You have joined %1 as %2&quot;</span>).arg(message-&gt;channel(), message-&gt;nick());</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! %1 has joined %2&quot;</span>).arg(message-&gt;nick(), message-&gt;channel());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QString IrcMessageFormatter::formatModeMessage(<a class="code" href="classIrcModeMessage.html">IrcModeMessage</a>* message)</div>
<div class="line">{</div>
<div class="line">    QString args = message-&gt;arguments().join(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (message-&gt;isReply())</div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! %1 mode is %2 %3&quot;</span>).arg(message-&gt;target(), message-&gt;mode(), args);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! %1 sets mode %2 %3 %4&quot;</span>).arg(message-&gt;nick(), message-&gt;target(), message-&gt;mode(), args);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QString IrcMessageFormatter::formatNamesMessage(<a class="code" href="classIrcNamesMessage.html">IrcNamesMessage</a>* message)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! %1 has %2 users&quot;</span>).arg(message-&gt;channel()).arg(message-&gt;names().count());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QString IrcMessageFormatter::formatNickMessage(<a class="code" href="classIrcNickMessage.html">IrcNickMessage</a>* message)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! %1 has changed nick to %2&quot;</span>).arg(message-&gt;oldNick(), message-&gt;newNick());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QString IrcMessageFormatter::formatPartMessage(<a class="code" href="classIrcPartMessage.html">IrcPartMessage</a>* message)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (message-&gt;reason().isEmpty())</div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! %1 has left %2&quot;</span>).arg(message-&gt;nick(), message-&gt;channel());</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! %1 has left %2 (%3)&quot;</span>).arg(message-&gt;nick(), message-&gt;channel(), message-&gt;reason());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QString IrcMessageFormatter::formatPrivateMessage(<a class="code" href="classIrcPrivateMessage.html">IrcPrivateMessage</a>* message)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> QString content = <a class="code" href="classIrcTextFormat.html">IrcTextFormat</a>().<a class="code" href="classIrcTextFormat.html#a6b9e95136862ec63d240090549681b9d">toHtml</a>(message-&gt;content());</div>
<div class="line">    <span class="keywordflow">if</span> (message-&gt;isAction())</div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;* %1 %2&quot;</span>).arg(message-&gt;nick(), content);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;&amp;lt;%1&amp;gt; %2&quot;</span>).arg(message-&gt;nick(),content);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">QString IrcMessageFormatter::formatQuitMessage(<a class="code" href="classIrcQuitMessage.html">IrcQuitMessage</a>* message)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (message-&gt;reason().isEmpty())</div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! %1 has quit&quot;</span>).arg(message-&gt;nick());</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">return</span> QObject::tr(<span class="stringliteral">&quot;! %1 has quit (%2)&quot;</span>).arg(message-&gt;nick(), message-&gt;reason());</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
<div class="ttc" id="aclassIrcTextFormat_html"><div class="ttname"><a href="classIrcTextFormat.html">IrcTextFormat</a></div><div class="ttdoc">Provides methods for text formatting.</div><div class="ttdef"><b>Definition:</b> irctextformat.h:46</div></div>
<div class="ttc" id="aclassIrcPrivateMessage_html"><div class="ttname"><a href="classIrcPrivateMessage.html">IrcPrivateMessage</a></div><div class="ttdoc">Represents a private message.</div><div class="ttdef"><b>Definition:</b> ircmessage.h:512</div></div>
<div class="ttc" id="aclassIrcTextFormat_html_a6b9e95136862ec63d240090549681b9d"><div class="ttname"><a href="classIrcTextFormat.html#a6b9e95136862ec63d240090549681b9d">IrcTextFormat::toHtml</a></div><div class="ttdeci">Q_INVOKABLE QString toHtml(const QString &amp;text) const</div><div class="ttdef"><b>Definition:</b> irctextformat.cpp:467</div></div>
<div class="ttc" id="aclassIrcMessage_html"><div class="ttname"><a href="classIrcMessage.html">IrcMessage</a></div><div class="ttdoc">The base class of all messages.</div><div class="ttdef"><b>Definition:</b> ircmessage.h:48</div></div>
<div class="ttc" id="aclassIrcMessage_html_a9b859b3a8d24f1a959073ce015460cbead5c86c25082627ad735425bd52a5db4e"><div class="ttname"><a href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbead5c86c25082627ad735425bd52a5db4e">IrcMessage::Quit</a></div><div class="ttdeci">@ Quit</div><div class="ttdoc">A quit message (IrcQuitMessage).</div><div class="ttdef"><b>Definition:</b> ircmessage.h:87</div></div>
<div class="ttc" id="aclassIrcQuitMessage_html"><div class="ttname"><a href="classIrcQuitMessage.html">IrcQuitMessage</a></div><div class="ttdoc">Represents a quit message.</div><div class="ttdef"><b>Definition:</b> ircmessage.h:538</div></div>
<div class="ttc" id="aclassIrcMessage_html_a9b859b3a8d24f1a959073ce015460cbeaaf0f4b4adb7b851d0c7f64c3303b75f8"><div class="ttname"><a href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbeaaf0f4b4adb7b851d0c7f64c3303b75f8">IrcMessage::Private</a></div><div class="ttdeci">@ Private</div><div class="ttdoc">A private message (IrcPrivateMessage).</div><div class="ttdef"><b>Definition:</b> ircmessage.h:86</div></div>
<div class="ttc" id="aclassIrcMessage_html_a9b859b3a8d24f1a959073ce015460cbeade8a49033f005713c4a49755eb5ce4f2"><div class="ttname"><a href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbeade8a49033f005713c4a49755eb5ce4f2">IrcMessage::Names</a></div><div class="ttdeci">@ Names</div><div class="ttdoc">A names message (IrcNamesMessage).</div><div class="ttdef"><b>Definition:</b> ircmessage.h:79</div></div>
<div class="ttc" id="aclassIrcMessage_html_a9b859b3a8d24f1a959073ce015460cbea8be6a23471631f8d29d814434aa75a04"><div class="ttname"><a href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbea8be6a23471631f8d29d814434aa75a04">IrcMessage::Join</a></div><div class="ttdeci">@ Join</div><div class="ttdoc">A join message (IrcJoinMessage).</div><div class="ttdef"><b>Definition:</b> ircmessage.h:75</div></div>
<div class="ttc" id="aclassIrcMessage_html_a77ccf44a9581bfcd5504deb609dd2864adda0a6be2cc32893bca0639e73de4f0f"><div class="ttname"><a href="classIrcMessage.html#a77ccf44a9581bfcd5504deb609dd2864adda0a6be2cc32893bca0639e73de4f0f">IrcMessage::Own</a></div><div class="ttdeci">@ Own</div><div class="ttdoc">The message is user's own message.</div><div class="ttdef"><b>Definition:</b> ircmessage.h:100</div></div>
<div class="ttc" id="aclassIrcNickMessage_html"><div class="ttname"><a href="classIrcNickMessage.html">IrcNickMessage</a></div><div class="ttdoc">Represents a nick message.</div><div class="ttdef"><b>Definition:</b> ircmessage.h:402</div></div>
<div class="ttc" id="aclassIrcPartMessage_html"><div class="ttname"><a href="classIrcPartMessage.html">IrcPartMessage</a></div><div class="ttdoc">Represents a part message.</div><div class="ttdef"><b>Definition:</b> ircmessage.h:462</div></div>
<div class="ttc" id="aclassIrcModeMessage_html"><div class="ttname"><a href="classIrcModeMessage.html">IrcModeMessage</a></div><div class="ttdoc">Represents a mode message.</div><div class="ttdef"><b>Definition:</b> ircmessage.h:339</div></div>
<div class="ttc" id="aclassIrcMessage_html_a9b859b3a8d24f1a959073ce015460cbea546c7f488c441f6defd41f8a7f2fe412"><div class="ttname"><a href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbea546c7f488c441f6defd41f8a7f2fe412">IrcMessage::Mode</a></div><div class="ttdeci">@ Mode</div><div class="ttdoc">A mode message (IrcModeMessage).</div><div class="ttdef"><b>Definition:</b> ircmessage.h:77</div></div>
<div class="ttc" id="aclassIrcMessage_html_a9b859b3a8d24f1a959073ce015460cbea78efe3c17c39aebe549ec60ed12fbeb6"><div class="ttname"><a href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbea78efe3c17c39aebe549ec60ed12fbeb6">IrcMessage::Part</a></div><div class="ttdeci">@ Part</div><div class="ttdoc">A part message (IrcPartMessage).</div><div class="ttdef"><b>Definition:</b> ircmessage.h:83</div></div>
<div class="ttc" id="aclassIrcMessage_html_a9b859b3a8d24f1a959073ce015460cbea1d6b506c86c49118e00ea91e6a5e715c"><div class="ttname"><a href="classIrcMessage.html#a9b859b3a8d24f1a959073ce015460cbea1d6b506c86c49118e00ea91e6a5e715c">IrcMessage::Nick</a></div><div class="ttdeci">@ Nick</div><div class="ttdoc">A nick message (IrcNickMessage).</div><div class="ttdef"><b>Definition:</b> ircmessage.h:80</div></div>
<div class="ttc" id="aircmessageformatter_8h_html"><div class="ttname"><a href="ircmessageformatter_8h.html">ircmessageformatter.h</a></div><div class="ttdoc">Client example</div></div>
<div class="ttc" id="aclassIrcNamesMessage_html"><div class="ttname"><a href="classIrcNamesMessage.html">IrcNamesMessage</a></div><div class="ttdoc">Represents a names list message.</div><div class="ttdef"><b>Definition:</b> ircmessage.h:384</div></div>
<div class="ttc" id="aclassIrcJoinMessage_html"><div class="ttname"><a href="classIrcJoinMessage.html">IrcJoinMessage</a></div><div class="ttdoc">Represents a join message.</div><div class="ttdef"><b>Definition:</b> ircmessage.h:299</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Oct 29 2020 21:07:43 for Communi by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
